using GamestatsBase;
using System;
using System.Collections.Generic;
using System.IO;
using System.Linq;
using System.Text;
using System.Web;

namespace Sample.pokedngnwii.web.rescue
{
    /// <summary>
    /// Summary description for rescueReceive
    /// </summary>
    public class rescueReceive : GamestatsHandler
    {

        public rescueReceive() : base("zjzrhOVXZKLHNspYpGoR0001c7850000620b0000000820556356pokedngnwii",
            GamestatsRequestVersions.Version2, GamestatsResponseVersions.Version2)
        {

        }

        public override void ProcessGamestatsRequest(byte[] request, MemoryStream response, string url, int pid, HttpContext context, GamestatsSession session)
        {
            // replay response from Random Mission.pcapng
            // request data:
            // 0000: 8b9ca41c0c000000 1ca49c8b00000000
            // 0010: 0001b14f
            // note: the request data seems to share its format with rescueEntry

            response.Write(new byte[] {
                0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x01,
                0xa9, 0x9f, 0x50, 0x07, 0xe3, 0x53, 0x95, 0xf5,
                0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
                0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
                0x00, 0x7a, 0x00, 0x00, 0xff, 0x34, 0xff, 0x39,
                0x30, 0x00, 0x30, 0x00, 0x30, 0x00, 0x30, 0x00,
                0x30, 0x00, 0x30, 0x00, 0x30, 0x00, 0x30, 0x00,
                0x30, 0x00, 0x30, 0x00, 0x30, 0x00, 0x30, 0x00,
                0x30, 0x00, 0x30, 0x00, 0x30, 0x00, 0x30, 0x00,
                0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
                0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
                0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
                0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
                0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
                0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
                0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
                0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
                0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
                0x32, 0x64, 0x63, 0x66, 0x39, 0x61, 0x35, 0x35,
                0x66, 0x63, 0x38, 0x32, 0x32, 0x33, 0x61, 0x32,
                0x30, 0x30, 0x33, 0x63, 0x65, 0x39, 0x61, 0x39,
                0x36, 0x38, 0x38, 0x64, 0x32, 0x33, 0x32, 0x64,
                0x66, 0x65, 0x38, 0x33, 0x32, 0x38, 0x38, 0x64 },
                0, 184);
        }
    }
}